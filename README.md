# PintSwap

## What is PintSwap?

PintSwap is a DEX, built with the OTC use-case in mind. The difference between PintSwap and existing projects is that there is no persistent contract that facilitates trades. In a PintSwap trade, the two parties involved in a trade connect directly to one another over a libp2p stream to generate a shared key. Using the shared key, the traders create an ECDSA signature of an Ethereum contract deployment transaction. The contract only exists atomically and solely contains the logic to execute the trade, after which it self-destructs. If you view this transaction on a block explorer, you will only see a hard link exists to either side of the trade.

## How to trade

To create an offer, load the application at [https://pintswap.eth.link](https://pintswap.eth.link) and connect your wallet to the p2p network. You can choose from the list of assets (the list includes ETH) or enter a custom address for either side of the trade. The "In" token is the asset you are selling, and the "Out" token is what you will receive. You specify the amounts that the trade must execute for the client to be willing to sign.

Once you create the offer, you will get a link below the form which you can click to copy to your clipboard. The link contains your address on the pintp2p network and the order identifier for the order you want filled. Keep this page open and publish this link to the counterparty who wants to trade.

When the counterparty loads the page via the link, he will connect to pintp2p and dial your browser over webRTC. A secure communication channel is established and key generation will take place. Once the shared key is generated, the app will prompt you to sign some messages/transactions, depending on which assets are being traded.

If ETH is being used in the trade, you will be prompted to wrap the ETH as WETH prior to trading.

If USDC is being used in the trade, you will be prompted to sign an EIP712 message instead of an approval transaction.

If USDC is not being used in the trade, you will be prompted to make an approval transaction for the asset you are spending.

The trader who is taking the offer will be prompted to make a small ETH transfer to the shared address generated via 2p-ecdsa. This is used to pay the gas for the trade.

After the approval process, the trade transaction will be deployed to the target network, and the trade will take place!

## Security

There is no concept of frontrunning possible in the trade system used by PintSwap. The channel established between two traders over pintp2p is encrypted using NOISE. The shared key generated by the two traders is created using 2p-ecdsa sMPC, which is a 2-of-2 threshold ECDSA scheme. The contract address created by the trade transaction is the only address approved to spend either party's funds, and since both traders assemble the same bytecode for the contract deployment, this contract can never exist unless it is the exact code which performs the agreed trade.


## PINT token

TBD
